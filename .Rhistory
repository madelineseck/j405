hs_participation |>
ggplot(aes(x = boys, y = girls, label = district)) +
geom_point(color = "blue", size = 5) +
geom_text(vjust = -0.5, size = 5
) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title = "Relationship Between Boys and Girls High School Sports Participation by District",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
hs_participation |>
ggplot(aes(x = boys, y = girls)) +
geom_point(color = "blue", size = 5) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title = "Boys and Girls High School Sports Participation",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
hs_participation |>
ggplot(aes(x = boys, y = girls, label = district)) +
geom_point(color = "bule", size = 3) +
geom_text(vjust = -0.5, size = 3) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title = "Relationship Between Boys and Girls High School Sports Participation by District",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
hs_participation |>
ggplot(aes(x = boys, y = girls, label = district)) +
geom_point(color = "blue", size = 3) +
geom_text(vjust = -0.5, size = 3) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title = "Relationship Between Boys and Girls High School Sports Participation by District",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
hs_participation |>
ggplot(aes(x = boys, y = girls)) +
geom_point(color = "blue", size = 5) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title = Boys and Girls High School Sports Participation in Maryland",
hs_participation |>
ggplot(aes(x = boys, y = girls)) +
geom_point(color = "blue", size = 5) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title = "Relationship Between Boys and Girls High School Sports Participation in Maryland",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
hs_participation |>
ggplot(aes(x = boys, y = girls)) +
geom_point(color = "blue", size = 5) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title =  "Boys and Girls High School Sports",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
data <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
#your code here
data <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
view(md_car_thefts)
data <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
#your code here
data <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
view(md_car_thefts)
data <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
data <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
view(md_car_thefts)
car_thefts <- car_thefts |>
mutate(
theft_rate = (thefts / population) * 100000
)
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
car_thefts <- car_thefts |>
mutate(
theft_rate = (thefts / population) * 100000
)
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
car_thefts <- car_thefts |>
mutate(
theft_rate = (thefts / population) * 100000
)
car_thefts <- car_thefts |>
mutate(
theft_rate = (thefts / population) * 100000
)
#your code here
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
car_thefts <- car_thefts |>
mutate(
theft_rate = (thefts / population) * 100000
)
car_thefts <- car_thefts |>  %>%
car_thefts <- car_thefts |>
mutate(
theft_rate = (thefts / population) * 100000
)
car_thefts <- car_thefts |>
mutate(
theft_rate = (thefts / population) * 100000
)
inspections <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/montco_inspections.csv")
View(inspections)
#your code here
compliance_stats <- inspections |>
summarize(
mean_compliance = mean(ComplianceScore, na.rm = TRUE),
sd_compliance = sd(ComplianceScore, na.rm = TRUE),
max_compliance = max(ComplianceScore, na.rm = TRUE),
min_compliance = min(ComplianceScore, na.rm = TRUE_
#your code here
compliance_stats <- inspections |>
summarize(
mean_compliance = mean(ComplianceScore, na.rm = TRUE),
sd_compliance = sd(ComplianceScore, na.rm = TRUE),
max_compliance = max(ComplianceScore, na.rm = TRUE),
min_compliance = min(ComplianceScore, na.rm = TRUE_
)
#your code here
sd(inspections)
compliance_stats <- inspections %>%
summarise(
mean_score = mean(compliance_score, na.rm = TRUE),
sd_score = sd(compliance_score, na.rm = TRUE),
min_score = min(compliance_score, na.rm = TRUE),
max_score = max(compliance_score, na.rm = TRUE)
)
# View the new dataframe
compliance_stats
ggplot(inspections, aes(x = compliance_score)) +
geom_histogram(binwidth = 5, fill = "blue", color = "black") +  # Adjust binwidth as needed
geom_vline(aes(xintercept = mean_score), color = "red", linetype = "dashed", size = 1) +
labs(
title = "Distribution of Restaurant Compliance Scores in Montgomery County",
x = "Compliance Score",
y = "Number of Restaurants"
) +
theme_minimal()
ggplot(inspections, aes(x = compliance_score)) +
geom_histogram(binwidth = 5, fill = "blue", color = "black") +
geom_vline(aes(xintercept = mean_score), color = "red", linetype = "dashed", size = 1) +
labs(
title = "Distribution of Restaurant Compliance Scores in Montgomery County",
x = "Compliance Score",
y = "Number of Restaurants"
) +
theme_minimal()
ggplot(inspections, aes(x = compliance_score)) +
geom_histogram(binwidth = 5, fill = "skyblue", color = "black") +
geom_vline(aes(xintercept = mean_score), color = "red", linetype = "dashed", size = 1) +
labs(
title = "Distribution of Restaurant Compliance Scores in Montgomery County",
x = "Compliance Score",
y = "Number of Restaurants"
) +
theme_minimal()
ggplot(inspections, aes(x = compliance_score)) +
geom_histogram(binwidth = 5, fill = "blue", color = "black") +
geom_vline(aes(xintercept = mean(compliance_score, na.rm = TRUE)),
color = "red", linetype = "dashed", size = 1) +
labs(
title = "Distribution of Restaurant Compliance Scores in Montgomery County",
x = "Compliance Score",
y = "Number of Restaurants"
) +
theme_minimal()
ggplot(inspections, aes(x = compliance_score)) +
geom_histogram(binwidth = 5, fill = "blue", color = "black") +
geom_vline(aes(xintercept = mean(compliance_score, na.rm = TRUE)),
color = "red", linetype = "dashed", size = 1) +
labs(
title = "Restaurant Compliance Scores in Montgomery County",
x = "Compliance Score",
y = "Number of Restaurants"
) +
theme_minimal()
ggplot(inspections, aes(x = compliance_score)) +
geom_histogram(binwidth = 5, fill = "blue", color = "black") +
geom_vline(aes(xintercept = mean(compliance_score, na.rm = TRUE)),
color = "red", linetype = "dashed", size = 1) +
labs(
title = "Compliance Scores in Montgomery County",
x = "Compliance Score",
y = "Number of Restaurants"
) +
theme_minimal()
library(dplyr)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_10000 = (car_thefts / population) * 10000)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_10000 = (car_thefts / population) * 10000)
library(dplyr)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_10000 = (car_thefts / population) * 10000)
library(dplyr)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_10000 = (car_thefts / population) * 10000)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_10000 = (car_thefts / population) * 10000)
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_100k = (car_thefts / population) * 100000)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_100000 = (car_thefts / population) * 100000)
median_rate <- median(car_thefts$theft_rate_per_100k)
total_thefts <- sum(car_thefts$car_thefts)
above_median <- car_thefts %>%
filter(theft_rate_per_100k > median_rate)
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
car_thefts <- car_thefts %>%
mutate(theft_rate_per_1000 = (car_thefts / population) * 1000)
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
car_thefts <- car_thefts %>%
mutate(theft_rate_per_1000 = (car_thefts / population) * 1000)
car_thefts <- car_thefts %>%
mutate(
car_thefts = as.numeric(car_thefts),
population = as.numeric(population),
theft_rate_per_1000 = (car_thefts / population) * 1000
)
car_thefts <- car_thefts %>%
mutate(
car_thefts = as.numeric(car_thefts),
population = as.numeric(population),
theft_rate_per_1000 = (car_thefts / population) * 1000
)
pg_crime <- pg_crime |>
mutate(car_theft_rate = (CarTheft / Population) * 100000)
car_thefts <- car_thefts |>
mutate(car_theft_rate = (CarTheft / Population) * 100000)
car_thefts <- car_thefts |>
mutate(car_theft_rate = (Car_Thefts / Population) * 100000)
car_thefts <- car_thefts |>
mutate(car_theft_rate = round((Thefts / Population) * 100000, 2))
car_thefts <- car_thefts %>%
mutate(
car_thefts = as.numeric(car_thefts),
population = as.numeric(population),
theft_rate_per_1000 = (car_thefts / population) * 1000
)
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
car_thefts <- car_thefts %>%
mutate(
car_thefts = as.numeric(car_thefts),
population = as.numeric(population),
theft_rate_per_1000 = (car_thefts / population) * 1000
)
median_rate <- median(car_thefts$theft_rate_per_1000, na.rm = TRUE)
median_rate
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
hs_participation |>
ggplot(aes(x = boys, y = girls)) +
geom_point(color = "blue", size = 5) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 2) +
labs(
title =  "Boys and Girls High School Sports",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
hs_participation |>
ggplot(aes(x = boys, y = girls)) +
geom_point(color = "blue", size = 5) +
geom_smooth(method = "lm", se = FALSE, color = "black", linewidth = 1) +
labs(
title =  "Boys and Girls High School Sports",
x = "Boys Participation",
y = "Girls Participation"
) +
theme_minimal()
car_thefts <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_car_thefts.csv")
View(car_thefts)
car_thefts <- car_thefts %>%
mutate(
car_thefts = as.numeric(car_thefts),  # ensure numeric
population = as.numeric(population),  # ensure numeric
theft_rate_per_1000 = (car_thefts / population) * 1000
)
car_thefts <- car_thefts %>%
mutate(
population = as.numeric(population),
theft_2023 = as.numeric(`2023`),   # ensure numeric
theft_rate_per_1000 = (theft_2023 / population) * 1000
)
median_theft_rate <- median(car_thefts$theft_rate_per_1000, na.rm = TRUE)
total_thefts_statewide <- sum(car_thefts$theft_2023, na.rm = TRUE)
median_theft_rate <- median(car_thefts$theft_rate_per_1000, na.rm = TRUE)
total_thefts_statewide <- sum(car_thefts$theft_2023, na.rm = TRUE)
counties_above_median <- car_thefts %>%
filter(theft_rate_per_1000 > median_theft_rate) %>%
select(county, theft_rate_per_1000)
median_theft_rate <- median(car_thefts$theft_rate_per_1000, na.rm = TRUE)
total_thefts_statewide <- sum(car_thefts$theft_2023, na.rm = TRUE)
counties_above_median <- car_thefts %>%
filter(theft_rate_per_1000 > median_theft_rate) %>%
select(county, theft_rate_per_1000)
median_theft_rate
total_thefts_statewide
counties_above_median
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)  # For data manipulation and visualization
library(lubridate)  # For handling dates
library(knitr)      # For nice tables
library(scales)     # For better axis formatting
# Load the 911 calls data
calls_data <- read_csv("https://raw.githubusercontent.com/dwillis/datajournalismbook-maryland/refs/heads/main/data/baltco_911_calls.csv")
# Display the first few rows to understand the structure
head(calls_data)
# Load the 911 calls data
calls_data <- read_csv("https://raw.githubusercontent.com/dwillis/datajournalismbook-maryland/refs/heads/main/data/baltco_911_calls.csv")
# Display the first few rows to understand the structure
head(calls_data)
# Get a summary of the data
glimpse(calls_data)
# Check for any missing values
colSums(is.na(calls_data))
# Check the date range in our data
min_date <- min(calls_data$date)
max_date <- max(calls_data$date)
cat("Data ranges from", min_date, "to", max_date)
# Count calls per day
daily_calls <- calls_data |>
count(date, name = "call_count")
# Display the first few days
head(daily_calls, 10)
# Basic summary statistics for daily call volume
summary(daily_calls$call_count)
# Plot daily call volume
ggplot(daily_calls, aes(x = date, y = call_count)) +
geom_line(color = "darkblue", alpha = 0.7) +
geom_point(color = "darkblue", alpha = 0.5, size = 1) +
theme_minimal() +
labs(title = "Daily 911 Overdose Calls in Baltimore County",
x = "Date",
y = "Number of Calls",
caption = "Source: Baltimore County 911 Call Data") +
scale_y_continuous(labels = comma) +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
# Calculate z-scores for daily call counts
daily_calls <- daily_calls |>
mutate(
mean_calls = mean(call_count),
sd_calls = sd(call_count),
z_score = (call_count - mean_calls) / sd_calls
)
# Display the data with z-scores
daily_calls |>
select(date, call_count, z_score) |>
head(10)
# Find days with unusual call volumes
unusual_days <- daily_calls |>
filter(abs(z_score) > 2) |>
arrange(desc(abs(z_score)))
# Display unusual days
unusual_days |>
select(date, call_count, z_score) |>
kable(digits = 2)
# Count how many days were unusually busy vs. unusually quiet
unusual_days |>
group_by(unusual_type = if_else(z_score > 0, "Unusually High", "Unusually Low")) |>
summarise(count = n())
# Create a clean factor for the plot legend
daily_calls <- daily_calls |>
mutate(call_volume_type = case_when(
z_score > 2 ~ "Unusually High",
z_score < -2 ~ "Unusually Low",
TRUE ~ "Normal"
))
# Plot with unusual days highlighted
ggplot(daily_calls, aes(x = date, y = call_count, color = call_volume_type)) +
geom_line(color = "gray70") +
geom_point(size = 2) +
scale_color_manual(values = c("Normal" = "gray50",
"Unusually High" = "red",
"Unusually Low" = "blue")) +
theme_minimal() +
labs(title = "Daily 911 Overdose Calls with Unusual Days Highlighted",
subtitle = "Unusual days have z-scores with absolute values > 2",
x = "Date",
y = "Number of Calls",
color = "Call Volume",
caption = "Source: Baltimore County 911 Call Data") +
scale_y_continuous(labels = comma) +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
# Add day of week to our dataset
daily_calls <- daily_calls |>
mutate(
day_of_week = wday(date, label = TRUE)
)
# Calculate average calls by day of week
#dow = Day of Week
dow_summary <- daily_calls |>
group_by(day_of_week) |>
summarise(
avg_calls = mean(call_count),
median_calls = median(call_count),
min_calls = min(call_count),
max_calls = max(call_count)
) |>
arrange(match(day_of_week, c("Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun")))
# Display summary by day of week
dow_summary |> kable(digits = 1)
# Plot calls by day of week
ggplot(dow_summary, aes(x = day_of_week, y = avg_calls)) +
geom_col(fill = "steelblue") +
geom_text(aes(label = round(avg_calls, 1)), vjust = -0.5) +
theme_minimal() +
labs(title = "Average 911 Overdose Calls by Day of Week",
x = "Day of Week",
y = "Average Number of Calls",
caption = "Source: Baltimore County 911 Call Data") +
theme(axis.text.x = element_text(angle = 0))
# Calculate day-of-week adjusted z-scores
daily_calls <- daily_calls |>
group_by(day_of_week) |>
mutate(
dow_mean = mean(call_count),
dow_sd = sd(call_count),
dow_z_score = (call_count - dow_mean) / dow_sd
) |>
ungroup()
# Find days that were unusual for their day of the week
dow_unusual_days <- daily_calls |>
filter(abs(dow_z_score) > 2) |>
arrange(desc(abs(dow_z_score)))
# Display days that were unusual for their day of the week
dow_unusual_days |>
select(date, day_of_week, call_count, dow_mean, dow_z_score)
# Add month and year for seasonal analysis
daily_calls <- daily_calls |>
mutate(
month = month(date, label = TRUE),
year = year(date)
)
# Calculate average calls by month
monthly_summary <- daily_calls |>
group_by(month) |>
summarise(
avg_calls = mean(call_count),
median_calls = median(call_count)
)
# Plot calls by month
ggplot(monthly_summary, aes(x = month, y = avg_calls, group = 1)) +
geom_line() +
geom_point() +
theme_minimal() +
labs(title = "Average 911 Overdose Calls by Month",
x = "Month",
y = "Average Number of Calls",
caption = "Source: Baltimore County 911 Call Data")
# Show a rolling 7-day average to better see trends
daily_calls <- daily_calls |>
arrange(date) |>
mutate(rolling_avg_7day = zoo::rollmean(call_count, k = 7, fill = NA))
# Plot with 7-day rolling average
ggplot(daily_calls, aes(x = date)) +
geom_line(aes(y = call_count), color = "gray60", alpha = 0.7) +
geom_line(aes(y = rolling_avg_7day), color = "blue", size = 1) +
theme_minimal() +
labs(title = "Daily 911 Overdose Calls with 7-Day Moving Average",
x = "Date",
y = "Number of Calls",
caption = "Source: Baltimore County 911 Call Data") +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
# Get the top 10 most unusual days
top_outliers <- daily_calls |>
arrange(desc(abs(z_score))) |>
head(10) |>
select(date, day_of_week, call_count, z_score)
# Display these days
top_outliers
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
options(scipen = 999)
schools <- read_csv("https://raw.githubusercontent.com/dwillis/jour405_files/refs/heads/main/montgomery_pa.csv")
schools |>
ggplot(aes(x = `FARMS Pct`, y = `% Met or Exceeded Math Expectations`)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE, color = "red") +
labs(x = "FARMS Percentage", y = "% Met or Exceeded Math Expectations", title = "Scatterplot of Math Expectations vs FARMS Percentage")
model <- lm(`% Met or Exceeded Math Expectations` ~ `FARMS Pct`, data = schools)
summary(model)
schools$predicted <- predict(model)
# Calculate the residuals
schools <- schools |>
mutate(residual = `% Met or Exceeded Math Expectations` - predicted)
# Sort the data frame by the absolute value of the residuals in descending order
schools <- schools |>
mutate(abs_residual = abs(residual)) |>
arrange(desc(abs_residual))
